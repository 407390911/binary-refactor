<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>View uploaded jar or class</title>
    <meta name="author" content="Argan Wang">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/static/css/bootstrap-1.4.0.css" rel="stylesheet">
    ##<link rel="stylesheet" href="/static/css/screen.css" type="text/css" />
    <link rel="stylesheet" href="/static/css/jquery.treeview.css" type="text/css" />
    <script src="/static/js/jquery.min.1.7.1.js"></script>
    <script type="text/javascript" src="/static/js/jquery.treeview.js"></script>
    <style type="text/css">
      body {
        padding-top: 60px;
      }
    </style>
  <script>
  $(document).ready(function(){
    $("#jar").treeview();
  });
  </script>
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="images/favicon.ico">
  </head>

  <body>

    #include("/menu.vm")
#macro(showClassName $map $name $id)
#set ($info = false)
#set ($namex = $name.replace('[',' ').replace(']',' ').trim())
#set($info = $map.getClassInfo($namex))
#if($info)<a href="/jarviewer/view.htm?id=$id&clz=$info.className">$name</a>#else $name #end
#end
    <div class="container-fluid">
      <div class="sidebar">
        <div class="well">
			<ul id="jar" class="filetree">
			<li><span class="folder">$origName</span>
				<ul>
				#foreach ($entry in $classMap.tree.entrySet())
				  <li class="#if($entry.key.equals("$openPkg"))  #else closed #end"><span class="folder">$entry.key</span>
					  <ul>
					  #foreach($clazz in $entry.value)
					  	<li class="file"><a href="/jarviewer/view.htm?id=$id&clz=${clazz.className}">${clazz.classShortName}</a></li>
					  #end
					  </ul>
				  </li>
				#end
				</ul>
			</li>
			</ul>
        </div>
      </div>
      
      <div class="content">
        <!-- Main hero unit for a primary marketing message or call to action -->
        <div class="hero-unit">
        #if($clzName)
          #set($clzInfo = $classMap.getClassInfo($clzName))
          <h3>ClassInfo:$clzInfo.className</h3>
          <p><a class="btn primary large">修改</a></p>
        #end
        </div>

       #if($clzInfo)
        <!-- Example row of columns -->
        <div class="row">
          <div class="span6">
            <h2>基类及接口</h2>
            #if($clzInfo.superClass)
            <p>基类：#showClassName($classMap $clzInfo.superClass.className $id)</p>
            #else
            <p>基类：java/lang/Object</p>
            #end
            #if($clzInfo.interfaces.size()>0)
            <p>接口列表</p>
            <ul>
              #foreach($i in $clzInfo.interfaces)
              <li>#showClassName($classMap $i.className $id)</li>
              #end
            </ul>
            #else
            <p>接口：无</p>
            #end
            #if($clzInfo.children.size()>0)
            <p>子类列表</p>
            <ul>
              #foreach($i in $clzInfo.children)
              <li>#showClassName($classMap $i.className $id)</li>
              #end
            </ul>
            #else
            <p>子类：无</p>
            #end
          </div>
        </div>
        <hr>
        <div class="row">
          <div class="span6">
            <h2>属性</h2>
            #if($clzInfo.fields.size()>0)
            <p>属性列表</p>
            <table>
            <tr><td>属性名</td><td>类型</td><td>描述</td></tr>
              #foreach($i in $clzInfo.fields)
              <tr><td>$i.name</td><td>#showClassName($classMap $i.type $id)</td><td>$i.desc</td></tr>
              #end
            </table>
            #else
            <p>属性：无</p>
            #end
         </div>
        </div>
        <hr>
        <div class="row">
          <div class="span5">
            <h2>方法</h2>
            #if($clzInfo.fields.size()>0)
            <p>方法列表</p>
            <table>
            <tr><td>方法名</td><td>返回类型</td><td>参数列表类型</td></tr>
              #foreach($i in $clzInfo.methods)
              <tr><td>$i.name</td><td>#showClassName($classMap $i.returnType $id)</td><td>
                <ul>
	              #foreach($x in $i.parameterTypes)
	              <li>#showClassName($classMap $x $id)</li>
	              #end
	            </ul>
              </td></tr>
              #end
            </table>
            #else
            <p>方法：无</p>
            #end
          </div>
        </div>
       #else
       <div class="row">
          <div class="span6">
            <h2>请选择一个类查看...</h2>
         </div>
        </div>
       #end
        <hr>

        <footer>
          <p>&copy; Company 2011</p>
        </footer>
      </div>
    </div>

  </body>
</html>